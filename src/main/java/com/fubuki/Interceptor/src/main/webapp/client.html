<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>RESTful客户端</title>
        <script src="jquery-3.7.0.min.js"></script>
        <script>
            $(function () {
                // get查询
                $("#btnGet").click(function () {
                    $.ajax({
                        url: "/restful/request",
                        type: "get",
                        dataType: "json",
                        success: function (json) {
                            console.info("你好");
                            alert(json.message);
                            $("#message").text(json.message);
                        }
                    })
                })
                // post新增
                $("#btnPost").click(function () {
                    $.ajax({
                        url: "/restful/request/100",
                        type: "post",
                        data: "name=lily&age=23",
                        dataType: "json",
                        success: function (json) {
                            $("#message").text(json.message + ":" + json.id);
                        }
                    })
                })
                //put更新
                $("#btnPut").click(function () {
                    $.ajax({
                        url: "/restful/request",
                        type: "put",
                        data: "name=lily&age=23",
                        dataType: "json",
                        success: function (json) {
                            $("#message").text(json.message);
                        }
                    })
                })
                //delete删除
                $("#btnDelete").click(function () {
                    $.ajax({
                        url: "/restful/request",
                        type: "delete",
                        dataType: "json",
                        success: function (json) {
                            $("#message").text(json.message);
                        }
                    })
                })


                //查询全部信息
                $("#btnPersons").click(function () {
                    $.ajax({
                        url: "/restful/persons",
                        type: "get",
                        dataType: "json",
                        success: function (json) {
                            console.info(json);
                            for (let i = 0; i < json.length; i++) {
                                const p = json[i];
                                $("#divPersons").append("<h2>" + p.name
                                    + "-" + p.age + "-" + p.birthday + "</h2>")
                            }
                        }
                    })
                })
            })
        </script>
    </head>
    <body>
        <input id="btnGet" type="button" value="发送Get请求">
        <input id="btnPost" type="button" value="发送Post请求">
        <input id="btnPut" type="button" value="发送Put请求">
        <input id="btnDelete" type="button" value="发送Delete请求">
        <h1 id="message"></h1>
        <hr/>
        <input id="btnPersons" type="button" value="查询所有人员">
        <div id="divPersons"></div>

    </body>
</html>